import { ResourceGrid, Resource } from 'src/shared/Docs/Resources';
import { Info, Callout, GuideSelector, GuideSection, CodeGroup, Steps, Step, CardGroup, Card, VersionBadge } from "src/shared/Docs/mdx";

export const description = 'Learn how to create Durable Endpoints with Inngest. Turn any API endpoint into a durable, observable workflow with step-based checkpointing.';

# Durable Endpoints <VersionBadge version="Beta" />

Durable Endpoints let you author your code in ways you're used to and get the benefits of durable execution with a minimal code change.

Durable Endpoints like a normal endpoints. The mental model stays the same: request, response. But each step checkpoints as it completes. If anything fails, execution resumes from where it left off, not from the beginning.

This dissolves a whole class of concerns: tracing, observability, and retry logic from the point of failure are all handled for you.

## When to use Durable Endpoints

**You want observability without the setup.** If you want visibility into your endpoints without configuring a bunch of external services, Durable Endpoints gives you that instantly.

**You have endpoints that fail partway through.** Any endpoint with multiple steps where failure at step 3 means steps 1 and 2 were wasted work. Instead of writing try/catch logic everywhere or hoping for the best, simply wrap your code in steps and let failures resume from where they left off.

**You're already using Inngest.** You can add durability to other endpoints without refactoring everything into a workflow or thinking heavily about event logic.

## Quick Start

If you have a traditional endpoint:

```typescript
export async function handler(req: Request): Promise<Response> {
  const data = await fetchData();
  const processed = await processData(data);
  await saveData(processed);
  return Response.json({ success: true });
}
```

Wrap it with `inngest.endpoint`, and wrap any functions inside with `step.run`:

```typescript
import { Inngest } from "inngest";
import { endpointAdapter } from "inngest/edge";

const inngest = new Inngest({ id: "my-app", endpointAdapter });

export const handler = inngest.endpoint(async (req: Request) => {
  const data = await step.run("fetch-data", () => fetchData());
  const processed = await step.run("process-data", () => processData(data));
  await step.run("save-data", () => saveData(processed));
  return Response.json({ success: true });
});
```

If `save-data` fails, the endpoint will retry from that step. `fetch-data` and `process-data` won't re-run.

## Step IDs

Each step needs a unique ID. This is how the system tracks what has completed and provides durability. If two steps have the same ID, the system can't distinguish between them.

```typescript
// Good: unique, descriptive IDs
await step.run("fetch-user", () => fetchUser(userId));
await step.run("update-subscription", () => updateSubscription(user));

// Bad: duplicate IDs will cause issues
await step.run("process", () => fetchUser(userId));
await step.run("process", () => updateSubscription(user));
```

### Dynamic Step IDs

When running steps in loops or with dynamic data, include identifying information in the step ID:

```typescript
// Pattern for recursive/iterative operations
const results = await Promise.all(
  queries.map((query) => {
    const stepHash = hashQuery(query);
    return step.run(`search-d${depth}-${stepHash}`, async () => {
      return await search(query);
    });
  })
);
```

## Using Steps

Durable Endpoints support all the same step methods as Inngest functions. See the [Steps documentation](/docs/steps) for the full reference:

- [`step.run()`](/docs/learn/inngest-steps#step-run) — Execute and checkpoint a function
- [`step.sleep()`](/docs/learn/inngest-steps#step-sleep) — Pause execution for a duration
- [`step.waitForEvent()`](/docs/learn/inngest-steps#step-wait-for-event-step-wait-for-event) — Wait for an external event

## SDK Support

| SDK | Support | Version |
|-----|---------|---------|
| TypeScript | ✅ Beta | >= 3.x (with `endpointAdapter`) |
| Go | ✅ | >= v0.14.0 |

## Limitations

Durable Endpoints is currently in beta. The following limitations apply:

- **Flow control is not supported** — Features like concurrency limits and rate limiting are not available for Durable Endpoints
- **POST body is not yet supported** — Prefer using query strings for passing data. POST body support is coming soon
- **Authenticated endpoints are not yet supported** — Authentication support is coming soon
- **Standard HTTP responses only** — Durable Endpoints should return a standard HTTP response, not an SSE stream

## Examples

- [DeepResearch with Durable Endpoints](/examples/deep-research)
- [Payment processing](/examples/payment-flow)

## Further Reference

- [TypeScript SDK Reference](/docs/sdk/typescript)
- [Inngest Functions](/docs/functions)
- [Steps Overview](/docs/steps)
- [Introducing Checkpointing](https://www.inngest.com/blog/introducing-checkpointing)