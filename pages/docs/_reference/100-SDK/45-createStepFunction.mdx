---
category: "SDK"
title: "`createStepFunction()`"
slug: "sdk/createStepFunction"
order: 45
---

The `createStepFunction` helper function or the `Inngest#createStepFunction` method can be used to define a multi-step function to safely coordinate between events, delay execution for hours or _days_, and conditionally run code based on the result of previous steps and incoming events.

Coupled with a [`serve()` handler](/docs/reference/sdk/serve), this enables you to host complex step functions on any platform and have Inngest trigger them via HTTP.

See [Writing multi-step functions](/docs/functions/multi-step) for in-depth discussions and examples on multi-step functions.

## Signature

```ts
(Inngest#)createStepFunction(nameOrOpts: string | FunctionOptions, event: string, fn: Function): InngestFunction
```

## Parameters

Both signatures take the same set of parameters.

_A ? indicates an optional property._

- `nameOrOpts: string | FunctionOptions`<br/>If a `string`, will be the name of the function as it will appear in the Inngest Cloud UI. An object of options for the function can also be specified, seen below as [`FunctionOptions`](#functionoptions).
- `event: string`<br/>The name of the event to listen for to trigger the step function, most commonly in the format `scope/subject.verb`, e.g. `app/user.created`. If using the `Inngest#createStepFunction` method - or passing an event payload to `createStepFunction` - this will be strictly typed to the available known events names.
- `fn: Function`<br/>The definition of the step function to run when the event is received. See [Writing multi-step functions](/docs/functions/multi-step) for more information.

### `FunctionOptions`

A set of options for configuring the identity and behaviour of an Inngest function.

- `name: string`<br/>A name for the function as it will appear in the Inngest Cloud UI.<br/><br/>This is used to create a slugified ID for the function too, e.g. `"My FN :)"` would create a slugified ID of `"my-fn"`.<br/><br/>If you are not specifying an ID and get a warning about duplicate functions, make sure to explicitly set an ID for the duplicate or change the name.
- `id?: string`<br/>An optional unique ID used to identify the function. This is used internally for versioning and referring to your function, so should not change between deployments.<br/><br/>By default, this is a slugified version of the given `name`, e.g. `"My FN :)"` would be slugified to `"my-fn"`.<br/><br/>If you are not specifying an ID and get a warning about duplicate functions, make sure to explicitly set an ID for the duplicate or change the name.
- `idempotency?: string`<br/>Allow the specification of an idempotency key using event data. If specified, this overrides the `throttle` object.
- `throttle?: object`<br/>Throttle functions, only running them a given number of times (`count`) per `period`. This can optionally include a throttle `key`, which is used to further constraint throttling, similar to idempotency.
  - `key?: string`<br/>An optional key to use for throttling, similar to idempotency.
  - `count: number`<br/>The number of times to allow the function to run per the given `period`.
  - `period: string`<br/>The period of time to allow the function to run `count` times. Must be in the format of a "time string", e.g. `"1h30m"`.

## Returns

Every method to create a function will return an `InngestFunction` instance, which can be passed to any [`serve()` handler](/docs/reference/sdk/serve) to register the function with Inngest.

## Examples

Create a step function using the helper that, on user creation, will prompt a user to post if they don't within 2 days.

```ts
import { createStepFunction } from "inngest";

export default createStepFunction(
  "My Step Function",
  "app/user.created",
  ({ event, tools: { run, waitForEvent } }) => {
    const postCreated = waitForEvent("app/post.created", {
      timeout: "2 days",
      match: "user.id",
    });

    if (!postCreated) {
      run("Send reminder", () =>
        sendEmail(event.user.email, "Remember to post")
      );
    }
  }
);
```

Using the Inngest client, create a step function that schedules a post to be sent out when a timer is created.

```ts
import { Inngest } from "inngest";
// Generated via `npx inngest-cli@latest types ts`
import { Events } from "./__generated__/inngest";

const inngest = new Inngest<Events>({ name: "My App" });

export default inngest.createStepFunction(
  "My Step Function",
  "app/post.timer.created",
  ({ event, tools: { run, sleepUntil } }) => {
    sleepUntil(new Date(event.data.postAt));
    run("Send post", () => sendPost(event.data.postData));
  }
);
```
