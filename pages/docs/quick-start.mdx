export const description =
  `This quick start walks you step-by-step through everything you need to get started with Inngest.`

# Quick start

This quick start walks you step-by-step through everything you need to get started. It'll take approximately 5 minutes. You will learn how to:

- Run Inngest on your machine for local testing
- Add Inngest to an existing Next.js project ([other frameworks are also supported](/docs/sdk/serve#setting-up-the-api))
- Write your first function
- Trigger your function from the development UI
- Trigger your function from code

Afterwards you'll be ready to [deploy your app to any platform](/docs/deploy), then build [advanced functions using our guides](/docs/guides)!  Let's get started.

## Select your framework:

<GuideSelector
  options={[
    { key: "nextpages", title: "Next.js - Pages Router" },
    { key: "nextappdir", title: "Next.js - App Router" }
  ]}>



## 1. Run Inngest locally

Before integrating Inngest we will start the [open-source development server](https://www.github.com/inngest/inngest).  Run the following command in your terminal:

```
npx inngest-cli@latest dev
```

You should see the following output:

<details>
  <summary><strong>You should see the following output:</strong></summary>

<CodeGroup>

```bash {{ language: 'js' }}
$ npx inngest-cli@latest dev

12:38PM INF runner > starting event stream backend=inmemory
12:38PM INF executor > starting queue backend=inmemory
12:38PM INF devserver > autodiscovering locally hosted SDKs
12:38PM INF executor > service starting
12:38PM INF coreapi > service starting
12:38PM INF devserver > service starting
12:38PM INF executor > subscribing to function queue
12:38PM INF runner > starting queue backend=inmemory
12:38PM INF coreapi > starting server addr=0.0.0.0:8300
12:38PM INF api > starting server addr=0.0.0.0:8288
12:38PM INF runner > initializing scheduled messages len=0
12:38PM INF runner > service starting
12:38PM INF runner > subscribing to events topic=events

        Inngest dev server online at 0.0.0.0:8288, visible at the following URLs:

          - http://127.0.0.1:8288 (http://localhost:8288)
```

</CodeGroup>

</details>

This runs Inngest locally.  We'll use this to test our functions as we write them.  With this running you can visit [`http://localhost:8288`](http://localhost:8288) to see the development UI:

<img
  src="/assets/docs/quick-start/dev-server-startup-screen.png"
  width="720" height={720/1800*1218} quality="95"
  className="max-w-2xl"
/>

Let's get started with adding Inngest to a project!

## 2. Add Inngest to a Next.js project

Inngest runs your functions securely via an API endpoint at `/api/inngest`.  The first step is to add this API endpoint to your project.


<details>
  <summary><strong>Prerequisite: Create a new Next.js project</strong></summary>



Let's start a new Next.js project by running `create-next-app` in your terminal:

<GuideSection show="nextpages">
```shell
npx create-next-app@latest --ts --eslint --tailwind --no-src-dir --no-app --import-alias='@/*' inngest-guide
```
</GuideSection>

<GuideSection show="nextappdir">
```shell
npx create-next-app@latest --ts --eslint --tailwind --src-dir --app --import-alias='@/*' inngest-guide
```
</GuideSection>

You can answer the questions however you'd like.  This creates a new `inngest-guide` directory containing your project.  Open this directory in your terminal and code editor, then we can start adding Inngest!
</details>

### Install the Inngest SDK

Within your Next.js project root, add the Inngest JS SDK:

<CodeGroup>
```shell {{ title: "npm" }}
npm install inngest
```
```shell {{ title: "yarn" }}
yarn add inngest
```
```shell {{ title: "pnpm" }}
pnpm add inngest
```
</CodeGroup>

### Create a client and API handler

<GuideSection show="nextpages">
  Create a new file at `./pages/api/inngest.ts` with the following code:

  ```ts {{ filename: "pages/api/inngest.ts" }}
  import { Inngest } from "inngest";
  import { serve } from "inngest/next";

  // Create a client to send and receive events
  export const inngest = new Inngest({ name: "My App" });

  // Create an API that serves zero functions
  export default serve(inngest, [/* your functions will be passed here later! */]);
  ```
</GuideSection>

<GuideSection show="nextappdir">
  Create a new directory next to your `app` directory where you'll define your Inngest functions and client (e.g. `src/inngest`).

  Create an Inngest client in this new directory:

  ```ts {{ filename: "src/inngest/client.ts" }}
  import { Inngest } from "inngest";

  // Create a client to send and receive events
  export const inngest = new Inngest({ name: "My App" });
  ```

  And now create a route handler to handle the `/api/inngest` route within your app directory at `src/app/api/inngest/route.ts`:

  ```ts {{ filename: "src/app/api/inngest/route.ts" }}
  import { serve } from "inngest/next";
  import { inngest } from "../../../inngest/client";

  // Create an API that serves zero functions
  export const { GET, POST, PUT } = serve(inngest, [
    /* your functions will be passed here later! */
  ]);
  ```
</GuideSection>

Here, we're creating a new [Inngest client](/docs/reference/client/create) which we'll use to send and receive events. With this, we create an API endpoint called a "Serve Handler" with a list of available functions.

You can import [`serve()`](/docs/reference/serve) for other frameworks, though the code is the same — only the import changes.

This sets up the API endpoint for hosting and invoking functions!  We'll update the array passed in to `serve` with functions as we write them.

## 3. Write your first function

### Defining the function

Let's write your first reliable serverless function! <GuideSection show="nextpages">Add the following to your `./pages/api/inngest.ts` file:</GuideSection>

<GuideSection show="nextpages">
  ```ts
  const helloWorld = inngest.createFunction(
    { name: "Hello World" },
    { event: "test/hello.world" },
    async ({ event, step }) => {
      await step.sleep("1s");
      return { event, body: "Hello, World!" };
    }
  );
  ```

  We also add this new function to the `serve` handler.

  ```ts
  export default serve(inngest, [
    helloWorld, // <-- This is where you'll always add your new functions
  ]);
  ```
</GuideSection>

<GuideSection show="nextappdir">
  Create the following function in your new `inngest` directory at `src/inngest/functions.ts`:

  ```ts {{ filename: "src/inngest/functions.ts" }}
  import { inngest } from "./client";

  export const helloWorld = inngest.createFunction(
    { name: "Hello World" },
    { event: "test/hello.world" },
    async ({ event, step }) => {
      await step.sleep("1s");
      return { event, body: "Hello, World!" };
    }
  );
  ```

  Now we need to add this new functions to the `serve` handler so Inngest can invoke it via HTTP:

  ```ts {{ filename: "src/app/api/inngest/route.ts" }}
  import { serve } from "inngest/next";
  import { inngest } from "../../../inngest/client";
  import { helloWorld } from "../../../inngest/functions";

  export const { GET, POST, PUT } = serve(inngest, [
    helloWorld, // <-- This is where you'll always add your new functions
  ]);
  ```

</GuideSection>

This creates a new function which will be called in the background any time Inngest receives an event with the name `test/hello.world`.  This introduces some new concepts:

{/*  TODO/DOCS: Link these to relevant docs on each when completed (Concepts, guides, references etc.) */}
- Functions are called by events (or on a schedule), in the background
- Functions can [sleep](/docs/reference/functions/step-sleep)
- Functions will [retry automatically if they error](/docs/functions/retries).

Instead of calling your function directly as an API with a JSON body, you send a JSON event to Inngest.  Inngest calls all functions listening to this event, and automatically passes the event payload JSON as an function argument.

Now, let's run your function!

## 4. Triggering your function from the development UI

Ensure your Next.js app is up and running via `npm run dev` inside project root, then head to [`http://localhost:8288`](http://localhost:8288).  You should see the following UI, which allows you to send events directly to Inngest:

<img
  src="/assets/docs/quick-start/dev-server-startup-screen.png"
  width="720" height={720/1800*1218} quality="95"
  className="max-w-2xl"
/>

To send the event, click on “Send event” in the top right corner then add the following event data:

```json
{
  "name": "test/hello.world",
  "data": {
    "email": "test@example.com"
  }
}
```

The event is sent to Inngest running locally via `npx inngest-cli@latest dev`, which automatically runs your function in the background reliably!

<img
  src="/assets/docs/quick-start/dev-server-function-run.png"
  width="800" height={800/2762*1868} quality="95" />

This highlights the power of event-driven development.  Using events, you can:

- Run one or many functions automatically
- See the event payload, and use the event payload in your functions
- Store the event for some amount of time, to locally replay if there are errors in production
- Build complex sleeps and schedules without worrying about queues

{/* - TODO/DOCS:
  Add and link "which we talk about here" (after using events...) to future "benefits of events" concept doc
*/}
There are many other benefits to using events.  For now, let's show you how to trigger functions in your code by sending events from your own app.

## 5. Triggering your function from code

When you want to run functions reliably in your app, you'll need to send an event to Inngest.  As you've seen, these events are forwarded to all functions that listen to this event.

To send an event from your code, you can use the `Inngest` client's `send()` method. Let's send an event from the a “hello” Next.js API function that you can create in <GuideSection show="nextpages">`./pages/api/hello.ts`</GuideSection><GuideSection show="nextappdir">`src/app/api/hello/route.ts`</GuideSection>:

<GuideSection show="nextpages">
  ```ts
  import { inngest } from "./inngest";

  // Create a simple async Next.js API route handler
  export default async function handler(req, res) {
    // Send your event payload to Inngest
    await inngest.send({
      name: "test/hello.world",
      data: {
        email: "test@example.com",
      },
    });

    res.status(200).json({ name: "Hello Inngest!" });
  }
  ```
</GuideSection>
<GuideSection show="nextappdir">
  ```ts
  import { NextResponse } from 'next/server';
  import { inngest } from "../../../inngest/client"; // Import our client

  // Create a simple async Next.js API route handler
  export async function GET() {
    // Send your event payload to Inngest
    await inngest.send({
      name: "test/hello.world",
      data: {
        email: "test@example.com",
      },
    });

    return NextResponse.json({ name: "Hello Inngest!" });
  }
  ```
</GuideSection>

<Callout>
Sending events requires an ["**event key**"](/docs/events/creating-an-event-key) to send data to Inngest in production. For local development, we only need a placeholder key. Create an `.env.local` file in your project and add the following environment variable:

```shell
INNGEST_EVENT_KEY="local"
```

After adding this, restart the `npm run dev` command that you have running.

</Callout>

Every time this API route is requested, an event is sent to Inngest. To test it, drop this new API route's URL in your web browser: `http://localhost:3000/api/hello` (change your port if your app is running elsewhere). With the `send` function you now can:

- Send one or more events within any API route
- Include any data you need in your function within the `data` object

In a real world app, you might send events from API routes that perform an action, like registering users (e.g. `app/user.signup`) or creating something (e.g. `app/report.created`).

That's it! You now have learned how to use Inngest by creating functions and sending events to trigger those functions. You can now explore [how to deploy your app to your platform](/docs/deploy) or learn [how to use Inngest with other frameworks](/docs/sdk/serve)!

If you'd like to learn more about functions or sending events check out these related docs:

- [Writing functions](/docs/functions)
- [Writing scheduled functions](/docs/functions#writing-a-scheduled-function)
- [Sending events](/docs/events)
{/* TODO/DOCS: Add the concepts category index page here when complete
  - [Learn the concepts](/docs/concepts) */}

</GuideSelector>
