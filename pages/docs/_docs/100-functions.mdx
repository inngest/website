---
category: "Writing functions"
title: "Writing functions"
slug: "functions"
order: 1
---


Follow along to learn how to:

- Write a background function triggered by an event
- Write a scheduled function

Writing functions is the same no matter what platform you deploy to ‚Äî so this example can be used for any TypeScript or JavaScript project (such as NextJS, Netlify, or Lambda).

## Install the SDK

Firstly, you need to install the SDK via npm or yarn:

```bash
npm install inngest  # or yarn add inngest
```

## Writing a background function

Copy the following code into a new file in your project, for example within `./inngest/function.ts`

```typescript
import { createFunction } from "inngest";

// This function runs the code and will be called in the background.
const job = async ({ event }) => {
  return "hello!"; // You can write whatever you want here.
}

export const demoFunction = createFunction<DemoEvent>(
  "Demo function",   // The name of your function, used for observability.
  "demo/demo.event", // The event that triggers this function.
  job,               // The function code, defined above.
)
```

This defines a new background job which runs any code that you pass it.  This function is automatically triggered in the background whenever the demo/test.event event is received.  You can test this function using standard tooling such as Jest or Mocha by exporting the job code and running standard unit tests.

<aside className="mt-6">

üíÅ **Why event-driven?**

Using events to trigger functions has many benefits:

1. It‚Äôs simple:  there‚Äôs no config to define, and no queues to configure
2. You can run many functions with a single event (fan-out)
3. Each event has its own type, so that your data is always correct
4. Inngest stores each event you receive, making testing and debugging simple

</aside>

## Writing a scheduled function

The following code defines a scheduled function, which runs automatically using the specified cron schedule:

```typescript
import { createScheduledFunction } from "inngest";

// This code will be called by the scheduled function.
const job = async () => {
  return "hello!"; // You can write whatever you want here.
}

export createScheduledFunction(
  "Demo function", // The name of your function, used for observability.
  "0 * * * *",     // The cron syntax for the function
  job,             // The function code, defined above.
)
```

This is very similar to defining an event-driven function, except it uses the `createScheduledFunction` call and a cron schedule to run your function at the specified interval.  This code can be deployed to any platform and will run automatically, without any HTTP calls.

## TypeScript

The Inngest SDK lets you strictly type all of your code against your real production data. This powerful feature helps to:

- Protect you from making breaking changes
- Encourage discoverability of your events via autocomplete
- Give you instant feedback as to whether your code will run as intended

To use generated event types, just run the `types` command on the Inngest CLI. You can do this via `npx`:

```sh
npx inngest-cli types ts [--output my/file.ts]
```

This will - by default - create a file at `./__generated__/inngest.ts` with all of your event types. You can then pass these in to a `new Inngest()` client.

```typescript
import { Inngest } from "inngest";
import { Events } from "./__generated__/inngest";

const inngest = new Inngest<Events>({ name: "My App" });
```

Or use individual events if using the `createFunction` helper directly.

```typescript
import { createFunction } from "inngest";
import { DemoEvent } from "./__generated__/inngest";

const fn = createFunction<DemoEvent>("Demo function", "demo/demo.event", job);
```

Finally, sometimes you want to provide type safety before an event has reached your Inngest Cloud account. For this, we can pass extra custom event types to the generated `Events` type which will be silently overridden when these events appear in Inngest.

```typescript
const inngest = new Inngest<
  Events<{
    "app/user.created": { data: { id: string } };
    "app/user.updated": AppUserUpdated;
  }>
>({ name: "My App" });
```

You can learn more about the Inngest SDK's TypeScript support on our [Using with TypeScript](/docs/typescript) page.

## Serving

You can host your functions right in your existing application on _any platform_. Inngest will call your functions securely via HTTP request on-demand.

To enable Inngest to access and call your functions, you need to set up the `serve()` handler to be accessible on it's own route. We recommend setting this up for `/api/inngest`. The `serve()` handler requires an `INNGEST_SIGNING_KEY` to be set as an environment variable, or explicitly passed as an options argument. For example, in a Next.js app, it looks like this:

```typescript
// ./pages/api/inngest.ts
// Import the Next.js serve function
import { serve } from "inngest/next";

// Create or import your function(s)
const fn = createFunction<DemoEvent>("Demo function", "demo/demo.event", job);

// Serve them
export default serve("My App", [fn, anotherFn]);
```

<aside>
  For a complete reference of the <code>serve()</code> handler, <a href="/docs/reference/sdk/serve">view the reference documentation</a>.<br/>
  For in-depth guides for particular frameworks, find yours in the navigation under <strong>"Frameworks."</strong>
</aside>

Now that your functions are being served via HTTP, open the route in your browser to view the SDK debug page. It will show you whether your functions are set up correctly, prompt you with what to change if not, and show you any next steps needed along the way!

![The SDK's local dashboard showing success](/assets/docs/sdk/landing.png)

## Testing

Before reaching production, we can test our functions using the Inngest CLI's dev server. This will create a local, in-memory version of Inngest Cloud, allowing you to send events to your functions and see the results.

Getting started with the dev server is easy - the top of your SDK debug page shows the status of dev server connectivity, as well as a copiable command to get started.

![The top bar of the SDK's local dashboard, showing a command to start the dev server](/assets/docs/sdk/top_bar_disconnected.png)

We'll click to copy that command, then paste it into our terminal. It'll look something like this:

```sh
npx inngest-cli@latest dev -u http://localhost:3000/api/inngest
```

The <code>-u</code> flag tells the dev server where to find your functions. The dev server will also always scan common ports (<code>:3000</code>, <code>:5000</code>, <code>:8000</code>, etc) for an <code>/api/inngest</code> route, so you can omit the <code>-u</code> flag if you're using a common framework.

Once you've started the dev server, you should see your functions registered and ready to go in the output! In addition, our SDK debug page will now show that we're connected to the dev server.

<details>
  <summary><strong>Check dev server logs</strong></summary>

  ```sh
  12:10PM INF overriding config to log step output within dev server
  12:10PM INF executor > starting queue backend=inmemory
  12:10PM INF runner > starting event stream backend=inmemory
  12:10PM INF runner > starting queue backend=inmemory
  12:10PM INF runner > initializing scheduled messages len=0
  12:10PM INF executor > service starting
  12:10PM INF devserver > service starting
  12:10PM INF executor > subscribing to function queue
  12:10PM INF api > starting server addr=0.0.0.0:8288
  12:10PM INF runner > service starting
  12:10PM INF runner > subscribing to events topic=events
  12:11PM INF devserver > registered functions app="My Next.js App" framework=nextjs len=1 sdk=js:v0.6.0 url=http://localhost:3001/api/inngest
  ```
</details>

![The top bar of the SDK's local dashboard, showing that we're connected to the dev server](/assets/docs/sdk/top_bar_connected.png)

Great! From here, we can now use the event sender in the SDK UI to send events to our functions. In our example, I have one function that responds to a `"demo/event.sent"` event. I can send that event to my function by opening the test event sender, entering the name and data, and clicing "_Send event_".

![The SDK's local dashboard, showing a test event being sent to a registered function](/assets/docs/sdk/event_sent.png)

<details>
  <summary><strong>Check dev server logs</strong></summary>

  ```sh
  12:18PM INF api > publishing event event={"data":{"name":"Inngest"},"id":"01GFX481B6482Y32VSQFB6BJJY","name":"demo/event.sent"} event_name=demo/event.sent id=01GFX481B6482Y32VSQFB6BJJY
  12:18PM INF runner > received message event=demo/event.sent id=01GFX481B6482Y32VSQFB6BJJY
  12:18PM INF runner > initializing fn event=demo/event.sent function=my-next-js-app-hello-world id=01GFX481B6482Y32VSQFB6BJJY
  12:18PM INF executor > executing action dsn=inngest.com/my-next-js-app-hello-world-step-step-test run_id=01GFX481H2KSDE7JNHR1Y0XT1J scopes=null step=step version=null
  12:18PM INF output > step output attempt=0 fn_id=my-next-js-app-hello-world fn_name="Hello World" output={"body":{"message":"Hello, Inngest!"},"status":200} run_id=01GFX481H2KSDE7JNHR1Y0XT1J step=step
  ```
</details>

If we check the dev server logs, we can see that the event was received, it successfully triggered our function, and our function correctly responded with `"Hello, Inngest!"` using the event data we provided.

## Next up

**Triggering functions**: next, you‚Äôll run through how you can trigger these functions by sending events.

**Deploying**: then, you‚Äôll learn how to deploy to your platform of choice so that they‚Äôre live.
