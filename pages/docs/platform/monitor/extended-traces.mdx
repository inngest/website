import { Callout, Note, Tip } from "src/shared/Docs/mdx";

export const description = "Inngest provides multiple levels of tracing to monitor your functions, from built-in execution traces to AI-specific instrumentation and comprehensive OpenTelemetry-powered distributed tracing.";

# Traces

Inngest offers three levels of tracing to give you visibility into your function executions, each designed for different observability needs:

1. **Built-in Traces** - Automatic execution tracking for all functions
2. **AI Traces** - Specialized instrumentation for AI and LLM operations
3. **Extended Traces** - OpenTelemetry-powered distributed tracing for comprehensive observability

## Built-in Traces

Every Inngest function automatically includes built-in tracing without any configuration. These traces track the core execution of your functions:

### What's Included

- **Function execution timeline** - Start and end times for your function runs
- **Step execution** - Individual step timing and status
- **Event data** - The event that triggered the function
- **Logs** - Console output and errors
- **Retry attempts** - Failed runs and retry history

### Viewing Built-in Traces

Built-in traces are available in the Inngest dashboard for every function run:

![Function runs list showing recent executions](/assets/docs/platform/monitor/inspecting-function-runs/function-runs.png)

Click on any function run to see detailed execution information:

![Function run details showing traces and logs](/assets/docs/platform/monitor/inspecting-function-runs/function-run-logs-timeline-1.png)

The timeline view shows your function's execution path with steps and logs:

![Function run timeline with integrated trace and log information](/assets/docs/platform/monitor/inspecting-function-runs/function-run-logs-timeline-2.png)

### When to Use Built-in Traces

Built-in traces are perfect for:
- **Day-to-day monitoring** - Tracking function executions and debugging basic issues
- **Step-level visibility** - Understanding which steps succeed or fail
- **Quick debugging** - Viewing logs and execution order
- **No setup required** - Available immediately for all functions

## AI Traces

`step.ai.*` methods are automatically instrumented with Extended Traces, providing detailed information about AI operations including prompts, responses, token usage, and model parameters.

needs expanding here....

## Extended Traces

Extended Traces bring OpenTelemetry-powered distributed tracing to your Inngest functions, providing the most comprehensive visibility into every aspect of your function executionâ€”from individual steps and external API calls to database queries and third-party service interactions.

### What's Included

When you enable Extended Traces, Inngest automatically instruments your functions to capture detailed trace data about:

- **Step execution timing** - See exactly how long each step in your function takes
- **External service calls** - Track API requests, database queries, and third-party integrations
- **Function flow** - Visualize the complete execution path including retries and error handling
- **Performance bottlenecks** - Identify slow operations and optimize your functions
- **Distributed context** - Full distributed tracing across your entire stack

Extended Traces integrate seamlessly with your existing observability stack through OpenTelemetry, the industry standard for distributed tracing.

### What You'll See

Once Extended Traces are enabled, you'll see detailed trace information in your function run details in the Inngest dashboard.

Every function run includes comprehensive trace spans showing the complete execution timeline:

![Basic function trace showing step execution and timing](/assets/docs/platform/monitor/extended-traces/basic-otel.png)

You can drill down into individual spans to see detailed timing information:

![Detailed view of individual trace spans](/assets/docs/platform/monitor/extended-traces/basic-otel-zoomed.png)

For complex workflows with multiple steps, Extended Traces provides a complete picture of your function's execution:

![Workflow trace showing multiple steps and operations](/assets/docs/platform/monitor/extended-traces/workflow-otel.png)

<Note>
  Extended Traces automatically capture spans from popular libraries including HTTP clients, database drivers, and more. See the full list of [automatic instrumentation](/docs/reference/typescript/extended-traces#instrumentation).
</Note>

### Detailed Span Information

Each span includes rich metadata about the operation:

![Detailed span information with attributes and timing](/assets/docs/platform/monitor/extended-traces/workflow-otel-details.png)

You can inspect attributes, timing data, and relationships between spans:

![Additional span details showing context and relationships](/assets/docs/platform/monitor/extended-traces/workflow-otel-details-2.png)

### Setup

Setting up Extended Traces is straightforward. The basic setup requires just a few lines of code:

```ts
// Import the middleware first (before other imports)
import { extendedTracesMiddleware } from "inngest/experimental";
const extendedTraces = extendedTracesMiddleware();

// Then import and configure Inngest
import { Inngest } from "inngest";

const inngest = new Inngest({
  id: "my-app",
  middleware: [extendedTraces],
});
```

<Callout>
  The `extendedTracesMiddleware()` must be imported and initialized before any other code to ensure proper instrumentation. This allows the OpenTelemetry tracer provider to patch libraries and collect traces from all parts of your application.
</Callout>

### Integration with Existing Providers

If you're already using an observability platform like Sentry, Datadog, or any other OpenTelemetry-compatible service, Extended Traces will automatically extend your existing provider. This means your Inngest function traces will appear alongside your other application traces in your existing observability platform.

### What's Captured

Extended Traces automatically capture:

- **Function lifecycle events** - Start, completion, and failure of function runs
- **Step execution** - Individual step timing, inputs, and outputs
- **HTTP requests** - All outbound HTTP/HTTPS calls with timing and status codes
- **Database operations** - Queries to PostgreSQL, MongoDB, MySQL, Redis, and more
- **External service calls** - AWS SDK, GraphQL, gRPC, and other integrations
- **Error information** - Stack traces and error details when operations fail

### When to Use Extended Traces

Extended Traces are particularly valuable for:

- **Complex workflows** - Functions with multiple steps, external calls, and dependencies
- **Performance optimization** - Identify bottlenecks across your entire stack
- **Production debugging** - Detailed visibility into what happened during an execution
- **Third-party monitoring** - Track the performance of external APIs and services
- **Distributed systems** - Trace requests across multiple services and functions
- **Compliance and auditing** - Maintain detailed records of function execution

## Choosing the Right Level

| Trace Level | Setup Required | Best For | Key Features |
|-------------|----------------|----------|--------------|
| **Built-in** | None | All functions, basic monitoring | Automatic, step visibility, logs |
| **AI Traces** | None | AI/LLM functions, cost tracking | Prompts, tokens, model params |
| **Extended** | Middleware + OpenTelemetry | Complex workflows, production systems | Full distributed tracing, automatic instrumentation |

<Tip>
  You can combine trace levels! Use Built-in Traces everywhere, add AI Traces for LLM functions, and enable Extended Traces for critical production workflows.
</Tip>

## Next Steps

Ready to enhance your function observability?

- [View the Extended Traces setup guide](/docs/reference/typescript/extended-traces) - Learn about advanced configuration options
- [Explore automatic instrumentation](/docs/reference/typescript/extended-traces#instrumentation) - See what libraries are automatically instrumented
- [Add custom instrumentation](/docs/reference/typescript/extended-traces#custom-instrumentation) - Instrument additional libraries or custom code
- [Learn about AI Traces](/docs/guides/ai-traces) - Set up tracing for AI and LLM operations
