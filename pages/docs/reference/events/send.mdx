# Send Events

Send events to Inngest. Functions with matching event triggers will be invoked.

```ts
import { inngest } from "./client";

await inngest.send({
  name: "app/account.created",
  data: {
    accountId: "645e9f6794e10937e9bdc201",
    billingPlan: "pro",
  },
  user: {
    external_id: "645ea000129f1c40109ca7ad",
    email: "taylor@example.com",
  }
})
```

To send events from within of the context of a function, use [`step.sendEvent()`](/docs/reference/functions/step-send-event).

---


## `inngest.send(eventPayload | eventPayload[]): Promise`
{/* TODO - Show the event ids in the return value when we add to the SDK */}
{/*## `inngest.send(eventPayload | eventPayload[]): Promise<string[]>`*/}

<Row>
  <Col>
    <Properties>
      <Property name="eventPayload" type="object | object[]" required>
        An event payload object or an array of event payload objects.

        <Properties nested={true}>
          <Property name="name" type="string" required>
            The event name. We recommend using lowercase dot notation for names, prepending `prefixes/` with a slash for organization.
          </Property>
          <Property name="data" type="object" required>
            Any data to associate with the event. Will be serialized as JSON.
          </Property>
          <Property name="user" type="object">
            Any relevant user identifying data or attributes associated with the event. **This data is encrypted at rest.**
            <Properties nested>
              <Property name="external_id" type="string">
                An external identifier for the user. Most commonly, their user id in your system.
              </Property>
            </Properties>
          </Property>
          <Property name="id" type="string">
            A unique ID used to idempotently trigger function runs.  If duplicate event IDs are seen,
	    only the first event will trigger function runs. [Read the idempotency guide here](/docs/guides/handling-idempotency).
          </Property>
          <Property name="ts" type="number">
            A timestamp integer representing the time (in milliseconds) at which the event occurred. Defaults to the time the Inngest receives the event.

	    If the `ts` time is in the future, function runs will be scheduled to start at the given time.   This has the same effect as running `await step.sleepUntil(event.ts)` at
	    the start of the function.
          </Property>
          <Property name="v" type="string">
            A version identifier for a particular event payload. e.g. `"2023-04-14.1"`
          </Property>
        </Properties>
      </Property>
    </Properties>
  </Col>
  <Col>
  ```ts
  // Send a single event
  await inngest.send({
    name: "app/post.created",
    data: { postId: "01H08SEAXBJFJNGTTZ5TAWB0BD" }
  })

  // Send an array of events
  await inngest.send([
    {
      name: "app/invoice.created",
      data: { invoiceId: "645e9e024befa68763f5b500" }
    },
    {
      name: "app/invoice.created",
      data: { invoiceId: "645e9e08f29fb563c972b1f7" }
    },
  ])

  // Send user data that will be encrypted at rest
  await inngest.send({
    name: "app/account.created",
    data: { billingPlan: "pro" },
    user: {
      external_id: "6463da8211cdbbcb191dd7da",
      email: "test@example.com"
    }
  })

  // Specify the idempotency id, version, and timestamp
  await inngest.send({
    // Use an id specific to the event type & payload
    id: "cart-checkout-completed-ed12c8bde",
    name: "storefront/cart.checkout.completed",
    data: { cartId: "ed12c8bde" },
    user: { external_id: "6463da8211cdbbcb191dd7da" },
    ts: 1684274328198,
    v: "2024-05-15.1"
  });
  ```
  </Col>
</Row>

## User data encryption üîê

All data sent in the `user` object is fully encrypted at rest.

<Callout variant="warning">
  <span className="text-yellow-300">‚ö†Ô∏è</span> When rerunning a function, `event.user` will be empty. This will be fixed in the future, but for now assume that you cannot rerun functions that rely on `event.user` data.
</Callout>

In the future, this object will be used to support programmatic deletion via API endpoint to support certain right-to-be-forgotten flows in your system. This will use the `user.external_id` property for lookup.

## Send Events via HTTP (Event API)

You can send events from any system or programming language with our simple API and an Inngest Event Key. The API accepts a single event payload or an array of event payloads.

To send an event to a specific [branch environment](/docs/platform/environments#branch-environments), set the `x-inngest-env` header to the name of your branch environment, e.g. `x-inngest-env: feature/my-branch`.

<CodeGroup tag="POST" label="inn.gs/e/:eventKey">

```bash {{ title: 'cURL' }}
curl https://inn.gs/e/$INNGEST_EVENT_KEY \
  --data '{
    "name": "user.signup",
    "data": {
      "userId": "645ea8289ad09eac29230442"
    }
  }'
```

```php
$url = "https://inn.gs/e/{$eventKey}";
$content = json_encode([
    "name" => "user.signup",
    "data" => [
      "userId" => "645ea8289ad09eac29230442",
    ],
]);

$curl = curl_init($url);
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HTTPHEADER, ["Content-type: application/json"]);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $content);

$json_response = curl_exec($curl);
$status = curl_getinfo($curl, CURLINFO_HTTP_CODE);
if ($status != 200) {
    return [
        'status' => $status,
        'message' => "Error: call to URL $url failed with status $status, response $json_response, curl_error " . curl_error($curl) . ", curl_errno " . curl_errno($curl),
    ];
}

curl_close($curl);
$response = json_decode($json_response, true);
```

</CodeGroup>

```json {{ title: 'Response' }}
{
  "ids": ["01H08W4TMBNKMEWFD0TYC532GG"],
  "status": 200
}
```

## Usage limits

See [usage limits][usage-limits] for more details.

[usage-limits]: /docs/usage-limits/inngest#events
